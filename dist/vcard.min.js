!function(e){function t(e){function t(e,t){return Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}for(var n,o,f,i,c,u={},p=e.split(/\r\n|\r|\n/),s=p.length,l=0,h=0;h<s;h++)if(""!=p[h])if(p[h].toUpperCase()!=r){if(p[h].toUpperCase()!=a){n=p[h].split(":"),o=n.shift(),f=n.join(":"),c=!1,i={};var v=function(e){return e+1<s&&(" "==p[e+1][0]||"\t"==p[e+1][0])};if(v(h))for(;v(h);)f+=p[h+1].trim(),h++;if(o.match(/;/)){o=o.replace(/\\;/g,"ΩΩΩ").replace(/\\,/,",");var g=o.split(";").map(function(e){return e.replace(/ΩΩΩ/g,";")});o=g.shift(),g.forEach(function(e){var t=e.split("=");t[0]=t[0].charAt(0).toUpperCase()+t[0].slice(1).toLowerCase(),i[t[0]]?i[t[0]].push(t[1]):i[t[0]]=[t[1]]})}if(f=f.replace(/\\n/g,"\n").replace(/\\,/g,","),f.match(/;/)&&(f=f.replace(/\\;/g,"ΩΩΩ"),f.match(/;/)?(f=f.split(";"),f=f.map(function(e){return e.replace(/ΩΩΩ/g,";")})):f=f.replace(/ΩΩΩ/g,";")),o.match(/\./)){var d=o.split(".");o=d[1],c=d[0]}o=o.charAt(0).toUpperCase()+o.slice(1).toLowerCase(),console.log(o);var m={};m[o]=f,Object.keys(i).length&&(m=t(i,m)),c&&(m.namespace=c);var y={};"undefined"==typeof u[l]?(y[o]=m,u[l]=y):("undefined"==typeof u[l][o]&&(u[l][o]=[]),y[o]=m,u[l][o].push(m))}}else l++;return u}function n(e,t){var n=[r],f="";t&&!e.version&&(e.version=[{value:"3.0"}]),t&&!e.uid&&(e.uid=[{value:o()}]);var i=function(e){return e.replace(/\n/g,"\\n").replace(/;/g,"\\;").replace(/,/g,"\\,")};return Object.keys(e).forEach(function(t){e[t]&&"function"==typeof e[t].forEach&&e[t].forEach(function(e){if("undefined"!=typeof e.value&&""!=e.value){if(e.value instanceof Array){for(var r=!0,a=0;a<e.value.length;a++)if("undefined"!=typeof e.value[a]&&""!=e.value[a]){r=!1;break}if(r)return}if(f="",e.namespace&&(f+=e.namespace+"."),f+=0===t.indexOf("X-")?t:t.toUpperCase(),"object"==typeof e.meta&&Object.keys(e.meta).forEach(function(t){"function"==typeof e.meta[t].forEach&&e.meta[t].forEach(function(e){f+=";"+i(t.toUpperCase())+"="+i(e)})}),f+=":","string"==typeof e.value?f+=i(e.value):(e.value=e.value.map(function(e){return i(e)}),f+=e.value.join(";")),f.length>75){var o=f.substr(0,75),c=f.substr(75),u=c.match(/.{1,74}/g);n.push(o),u.forEach(function(e){n.push(" "+e)})}else n.push(f)}})}),n.push(a),n.join("\r\n")}var r="BEGIN:VCARD",a="END:VCARD",o=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}();e.vCard={parse:t,generate:n}}("undefined"!=typeof window?window:module.exports);